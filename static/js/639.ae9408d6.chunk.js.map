{"version":3,"file":"static/js/639.ae9408d6.chunk.js","mappings":"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","sources":["feature/home/api/AmiiboClient.ts","../node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js","../node_modules/@babel/runtime/helpers/esm/toConsumableArray.js","../node_modules/@babel/runtime/helpers/esm/arrayWithoutHoles.js","../node_modules/@babel/runtime/helpers/esm/iterableToArray.js","../node_modules/@babel/runtime/helpers/esm/nonIterableSpread.js","../node_modules/@babel/runtime/helpers/esm/defineProperty.js","../node_modules/@babel/runtime/helpers/esm/objectSpread2.js","webpack://memory-card-game/./src/feature/home/page/game/Game.module.scss?48ed","webpack://memory-card-game/./src/feature/home/component/play-card/PlayCard.module.scss?1d72","feature/home/component/play-card/PlayCard.tsx","feature/home/page/game/Game.tsx","utils/ArrayUtis.ts"],"sourcesContent":["import axios from 'axios';\nimport { IApiResponse } from '../model/IApiResponse';\nimport { ISeriesKey } from '../model/ISeriesKey';\nimport { ISeries } from '../model/ISeries';\n\nclass AmiiboClient {\n    baseUrl: string;\n\n    constructor() {\n        this.baseUrl = process.env.REACT_APP_API_BASE_URL || '';\n    }\n\n    getSeriesKeys(): Promise<IApiResponse<ISeriesKey>> {\n        return axios.get(this.baseUrl + '/amiiboseries').then(res => res.data)\n    }\n\n    getSeriesByKey(key: string): Promise<IApiResponse<ISeries>> {\n        return axios.get(this.baseUrl + `/amiibo/?amiiboSeries=${key}`).then(res => res.data)\n    }\n}\n\nexport const client = new AmiiboClient();\n","function asyncGeneratorStep(gen, resolve, reject, _next, _throw, key, arg) {\n  try {\n    var info = gen[key](arg);\n    var value = info.value;\n  } catch (error) {\n    reject(error);\n    return;\n  }\n\n  if (info.done) {\n    resolve(value);\n  } else {\n    Promise.resolve(value).then(_next, _throw);\n  }\n}\n\nexport default function _asyncToGenerator(fn) {\n  return function () {\n    var self = this,\n        args = arguments;\n    return new Promise(function (resolve, reject) {\n      var gen = fn.apply(self, args);\n\n      function _next(value) {\n        asyncGeneratorStep(gen, resolve, reject, _next, _throw, \"next\", value);\n      }\n\n      function _throw(err) {\n        asyncGeneratorStep(gen, resolve, reject, _next, _throw, \"throw\", err);\n      }\n\n      _next(undefined);\n    });\n  };\n}","import arrayWithoutHoles from \"./arrayWithoutHoles.js\";\nimport iterableToArray from \"./iterableToArray.js\";\nimport unsupportedIterableToArray from \"./unsupportedIterableToArray.js\";\nimport nonIterableSpread from \"./nonIterableSpread.js\";\nexport default function _toConsumableArray(arr) {\n  return arrayWithoutHoles(arr) || iterableToArray(arr) || unsupportedIterableToArray(arr) || nonIterableSpread();\n}","import arrayLikeToArray from \"./arrayLikeToArray.js\";\nexport default function _arrayWithoutHoles(arr) {\n  if (Array.isArray(arr)) return arrayLikeToArray(arr);\n}","export default function _iterableToArray(iter) {\n  if (typeof Symbol !== \"undefined\" && iter[Symbol.iterator] != null || iter[\"@@iterator\"] != null) return Array.from(iter);\n}","export default function _nonIterableSpread() {\n  throw new TypeError(\"Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\");\n}","export default function _defineProperty(obj, key, value) {\n  if (key in obj) {\n    Object.defineProperty(obj, key, {\n      value: value,\n      enumerable: true,\n      configurable: true,\n      writable: true\n    });\n  } else {\n    obj[key] = value;\n  }\n\n  return obj;\n}","import defineProperty from \"./defineProperty.js\";\n\nfunction ownKeys(object, enumerableOnly) {\n  var keys = Object.keys(object);\n\n  if (Object.getOwnPropertySymbols) {\n    var symbols = Object.getOwnPropertySymbols(object);\n    enumerableOnly && (symbols = symbols.filter(function (sym) {\n      return Object.getOwnPropertyDescriptor(object, sym).enumerable;\n    })), keys.push.apply(keys, symbols);\n  }\n\n  return keys;\n}\n\nexport default function _objectSpread2(target) {\n  for (var i = 1; i < arguments.length; i++) {\n    var source = null != arguments[i] ? arguments[i] : {};\n    i % 2 ? ownKeys(Object(source), !0).forEach(function (key) {\n      defineProperty(target, key, source[key]);\n    }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)) : ownKeys(Object(source)).forEach(function (key) {\n      Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key));\n    });\n  }\n\n  return target;\n}","// extracted by mini-css-extract-plugin\nexport default {\"container\":\"Game_container__LI8uV\",\"backBtn\":\"Game_backBtn__qYOQx\",\"cards\":\"Game_cards__N++Nq\"};","// extracted by mini-css-extract-plugin\nexport default {\"container\":\"PlayCard_container__PUlbt\",\"card\":\"PlayCard_card__hxXGN\",\"rotate\":\"PlayCard_rotate__Y4O89\",\"front\":\"PlayCard_front__sr2D0\",\"back\":\"PlayCard_back__M0zFR\"};","import styles from './PlayCard.module.scss';\nimport { useEffect } from 'react';\n\ninterface PlayCardProps {\n    background: string;\n    rotate: boolean;\n    click: () => void;\n    index: number;\n}\n\nconst PlayCard = (props: PlayCardProps) => {\n    useEffect(() => {\n    }, []);\n\n    return (\n        <div className={styles.container}>\n            <div onClick={() => props.click()}\n                 className={`${styles.card} ${props.rotate ? styles.rotate : ''}`}>\n                <div className={styles.front}/>\n                <div className={styles.back} style={{backgroundImage: `url(${props.background})`}}/>\n            </div>\n        </div>\n    )\n}\n\nexport default PlayCard;\n","import styles from './Game.module.scss';\nimport { useLocation, useNavigate } from 'react-router-dom';\nimport { useEffect, useRef, useState } from 'react';\nimport { client } from '../../api/AmiiboClient';\nimport { ISeries } from '../../model/ISeries';\nimport PlayCard from '../../component/play-card/PlayCard';\nimport { shuffleArray } from '../../../../utils/ArrayUtis';\n\ninterface GameState {\n    key: string;\n    series: string;\n}\n\ninterface ICard extends ISeries {\n    rotate: boolean\n}\n\nconst Game = () => {\n    const [allCharacters, setAllCharacters] = useState<ISeries[]>([]);\n    const [gameCharacters, setGameCharacters] = useState<ICard[]>([]);\n    const [lastSelection, setLastSelection] = useState<number | null>(null);\n    const [solvedCharacters, setSolvedCharacters] = useState<number[]>([]);\n    const [wins, setWins] = useState<number>(0);\n    const acceptNewClick = useRef<boolean>(true);\n\n    const {state} = useLocation();\n    const navigate = useNavigate();\n    const seriesName = (state as GameState)?.series;\n    const seriesKey = (state as GameState)?.key;\n\n    useEffect(() => {\n        acceptNewClick.current = true;\n    }, [lastSelection]);\n\n    useEffect(() => {\n        if (solvedCharacters.length > 0 &&\n            solvedCharacters.length === gameCharacters.length) {\n            restart();\n        }\n    }, [solvedCharacters, gameCharacters]);\n\n    useEffect(() => {\n        const numbers: number[] = Array.from(Array(allCharacters.length).keys());\n        const randomNumbers: number[] = numbers.sort(() => Math.random() - 0.5).slice(0, 5);\n        const chosenCharacters = randomNumbers.map(n => ({\n            ...allCharacters[n],\n            rotate: false\n        }));\n        setGameCharacters(shuffleArray([...chosenCharacters, ...chosenCharacters]));\n    }, [allCharacters, wins]);\n\n    useEffect(() => {\n        if (!seriesName || !seriesKey) {\n            return navigate('/home');\n        }\n        const loadRandomCharacters = async (): Promise<void> => {\n            const allSeries: ISeries[] = await client.getSeriesByKey(seriesKey).then(res => res.amiibo);\n            setAllCharacters(allSeries);\n        }\n        loadRandomCharacters();\n    }, [seriesName, seriesKey]);\n\n    const onCardClick = (i: number): void => {\n        if (i === lastSelection || solvedCharacters.includes(i) || !acceptNewClick.current) return;\n        acceptNewClick.current = false;\n        openCard(i);\n        setTimeout(() => {\n            // wait for animation\n            lastSelection !== null ? handleSecondSelection(i) : setLastSelection(i);\n        }, 500);\n    }\n\n    const openCard = (i: number): void => {\n        setGameCharacters(old => old.map((card, index) => {\n            return i === index ? {...card, rotate: true} : card;\n        }));\n    }\n\n    const handleSecondSelection = (i: number): void => {\n        if (lastSelection == null) {\n            alert('contact police this should not have happened');\n        }\n        const selected = gameCharacters[i];\n        const previous = gameCharacters[lastSelection!];\n        if (selected.name !== previous.name) {\n            setGameCharacters(old => old.map((card, index) => {\n                return (index === i || index === lastSelection) ? {...card, rotate: false} : card;\n            }));\n        }\n\n        if (selected.name === previous.name) {\n            setSolvedCharacters(old => [...old, i, lastSelection!]);\n        }\n        setLastSelection(null);\n    }\n\n    const restart = () => {\n        alert(`Win ${wins + 1}`);\n        setLastSelection(null);\n        setSolvedCharacters([]);\n        setWins(old => old + 1);\n    }\n\n    return (\n        <div className={styles.container} data-testid=\"game\">\n            <div onClick={() => navigate('/home')} className={styles.backBtn}>Change Game Series</div>\n            <section className={styles.cards}>\n                {\n                    gameCharacters.map((char, i) => (\n                        <PlayCard index={i} click={() => onCardClick(i)} key={i} background={char.image}\n                                  rotate={char.rotate}/>\n                    ))\n                }\n            </section>\n        </div>\n    )\n}\n\nexport default Game;\n","export function shuffleArray<T>(array: T[]) {\n    for (let i = array.length - 1; i > 0; i--) {\n        const j = Math.floor(Math.random() * (i + 1));\n        [array[i], array[j]] = [array[j], array[i]];\n    }\n    return array;\n}\n"],"names":["client","AmiiboClient","baseUrl","this","process","axios","then","res","data","key","asyncGeneratorStep","gen","resolve","reject","_next","_throw","arg","info","value","error","done","Promise","_toConsumableArray","arr","Array","isArray","arrayLikeToArray","iter","Symbol","iterator","from","unsupportedIterableToArray","TypeError","_defineProperty","obj","Object","defineProperty","enumerable","configurable","writable","ownKeys","object","enumerableOnly","keys","getOwnPropertySymbols","symbols","filter","sym","getOwnPropertyDescriptor","push","apply","_objectSpread2","target","i","arguments","length","source","forEach","getOwnPropertyDescriptors","defineProperties","props","useEffect","className","styles","onClick","click","rotate","style","backgroundImage","background","useState","allCharacters","setAllCharacters","gameCharacters","setGameCharacters","lastSelection","setLastSelection","solvedCharacters","setSolvedCharacters","wins","setWins","acceptNewClick","useRef","state","useLocation","navigate","useNavigate","seriesName","series","seriesKey","current","restart","chosenCharacters","sort","Math","random","slice","map","n","array","j","floor","shuffleArray","loadRandomCharacters","fn","amiibo","allSeries","self","args","err","undefined","openCard","old","card","index","handleSecondSelection","alert","selected","previous","name","char","includes","setTimeout","onCardClick","image"],"sourceRoot":""}